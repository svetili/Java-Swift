--------------------------------------------------------
--  File created - Wednesday-June-12-2019   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Sequence CATEGORIES_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."CATEGORIES_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence FORUMS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."FORUMS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence MESSAGES_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."MESSAGES_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence REPLIES_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."REPLIES_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence REPLY_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."REPLY_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TOPICS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."TOPICS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 61 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence USERS_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "FORUMS"."USERS_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Table CATEGORIES
--------------------------------------------------------

  CREATE TABLE "FORUMS"."CATEGORIES" 
   (	"ID" NUMBER, 
	"TITLE" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table FORUMS
--------------------------------------------------------

  CREATE TABLE "FORUMS"."FORUMS" 
   (	"ID" NUMBER, 
	"TITLE" VARCHAR2(100 BYTE), 
	"CATEGORY_ID" NUMBER, 
	"FORUM_ID" NUMBER, 
	"OWNER_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table MESSAGES
--------------------------------------------------------

  CREATE TABLE "FORUMS"."MESSAGES" 
   (	"ID" NUMBER, 
	"TEXT" VARCHAR2(1000 BYTE), 
	"TOPIC_ID" NUMBER, 
	"USER_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table REPLIES
--------------------------------------------------------

  CREATE TABLE "FORUMS"."REPLIES" 
   (	"ID" NUMBER, 
	"TEXT" VARCHAR2(1000 BYTE), 
	"USER_ID" NUMBER, 
	"MESSAGE_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table TOPICS
--------------------------------------------------------

  CREATE TABLE "FORUMS"."TOPICS" 
   (	"ID" NUMBER, 
	"TITLE" VARCHAR2(100 BYTE), 
	"FORUM_ID" NUMBER, 
	"OWNER_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "FORUMS"."USERS" 
   (	"ID" NUMBER, 
	"USERNAME" VARCHAR2(20 BYTE), 
	"PASSWORD" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into FORUMS.CATEGORIES
SET DEFINE OFF;
Insert into FORUMS.CATEGORIES (ID,TITLE) values (1,'Home');
Insert into FORUMS.CATEGORIES (ID,TITLE) values (2,'Garden');
Insert into FORUMS.CATEGORIES (ID,TITLE) values (3,'Hobbies');
Insert into FORUMS.CATEGORIES (ID,TITLE) values (4,'Cars');
REM INSERTING into FORUMS.FORUMS
SET DEFINE OFF;
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (1,'Kitchen',1,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (2,'Living room',1,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (3,'Landshaft',2,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (6,'Fishing',3,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (7,'Audi',4,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (8,'Volvo',4,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (9,'Fiat',4,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (10,'Reno',4,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (11,'Tennis',3,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (12,'Garden''s furniture',2,null,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (13,'Cooking',null,1,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (14,'Kitchen''s furniture',null,1,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (15,'Utensils',null,1,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (16,'Particals',null,7,1);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (21,'Hiking',3,null,6);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (22,'Machines',2,null,6);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (41,'Flowers',null,3,2);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (42,'Bedroom',1,null,2);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (43,'TVs',null,2,2);
Insert into FORUMS.FORUMS (ID,TITLE,CATEGORY_ID,FORUM_ID,OWNER_ID) values (44,'Subforum 1',null,13,2);
REM INSERTING into FORUMS.MESSAGES
SET DEFINE OFF;
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (1,'Does somebody know an interesting pasta recipe?',1,1);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (3,'I am looking for an interesting recipe',1,1);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (4,'asdfdrfasddf',1,1);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (5,'adsfarefdfa',1,1);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (21,'blalba',1,2);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (22,'message1',41,2);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (23,'message audi',42,2);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (24,'Message home',43,2);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (25,'blasladfd',45,1);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (26,'messge n',21,2);
Insert into FORUMS.MESSAGES (ID,TEXT,TOPIC_ID,USER_ID) values (27,'blabla',46,2);
REM INSERTING into FORUMS.REPLIES
SET DEFINE OFF;
Insert into FORUMS.REPLIES (ID,TEXT,USER_ID,MESSAGE_ID) values (1,'I have one ...',2,1);
Insert into FORUMS.REPLIES (ID,TEXT,USER_ID,MESSAGE_ID) values (2,'2 kg flour, 1 cup of sugar ...',1,1);
Insert into FORUMS.REPLIES (ID,TEXT,USER_ID,MESSAGE_ID) values (21,'blasladfd',2,5);
Insert into FORUMS.REPLIES (ID,TEXT,USER_ID,MESSAGE_ID) values (22,'Thanks!',2,4);
REM INSERTING into FORUMS.TOPICS
SET DEFINE OFF;
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (1,'Looking for new pasta recipe',1,1);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (21,'Chocolate cake',1,6);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (41,'Topic1',3,2);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (42,'Topic audi',7,2);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (43,'Topic home',2,6);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (44,'Topic2',8,6);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (45,'Cooking topic 1',13,1);
Insert into FORUMS.TOPICS (ID,TITLE,FORUM_ID,OWNER_ID) values (46,'Topic1',44,2);
REM INSERTING into FORUMS.USERS
SET DEFINE OFF;
Insert into FORUMS.USERS (ID,USERNAME,PASSWORD) values (1,'svetili','12345');
Insert into FORUMS.USERS (ID,USERNAME,PASSWORD) values (2,'peter','123');
Insert into FORUMS.USERS (ID,USERNAME,PASSWORD) values (3,'ilina','321');
Insert into FORUMS.USERS (ID,USERNAME,PASSWORD) values (6,'sveti','12345');
--------------------------------------------------------
--  DDL for Index MESSAGES_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."MESSAGES_PK" ON "FORUMS"."MESSAGES" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index CATEGORIES_UK1
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."CATEGORIES_UK1" ON "FORUMS"."CATEGORIES" ("TITLE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index FORUMS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."FORUMS_PK" ON "FORUMS"."FORUMS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index CATEGORIES_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."CATEGORIES_PK" ON "FORUMS"."CATEGORIES" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index TOPICS_UK1
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."TOPICS_UK1" ON "FORUMS"."TOPICS" ("TITLE", "FORUM_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index FORUMS_UK1
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."FORUMS_UK1" ON "FORUMS"."FORUMS" ("TITLE", "OWNER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index MESSAGES_UK1
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."MESSAGES_UK1" ON "FORUMS"."MESSAGES" ("TEXT", "USER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index REPLY_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."REPLY_PK" ON "FORUMS"."REPLIES" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index TOPICS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."TOPICS_PK" ON "FORUMS"."TOPICS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index USERS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."USERS_PK" ON "FORUMS"."USERS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Index USERS_UK1
--------------------------------------------------------

  CREATE UNIQUE INDEX "FORUMS"."USERS_UK1" ON "FORUMS"."USERS" ("USERNAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Trigger CATEGORIES_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."CATEGORIES_TRG" 
BEFORE INSERT ON CATEGORIES 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT CATEGORIES_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
    IF INSERTING AND :NEW.TITLE IS NULL THEN
      SELECT CATEGORIES_SEQ.NEXTVAL INTO :NEW.TITLE FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."CATEGORIES_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger FORUMS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."FORUMS_TRG" 
BEFORE INSERT ON FORUMS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT FORUMS_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."FORUMS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger MESSAGES_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."MESSAGES_TRG" 
BEFORE INSERT ON MESSAGES 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT MESSAGES_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."MESSAGES_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REPLIES_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."REPLIES_TRG" 
BEFORE INSERT ON REPLIES 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT REPLIES_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."REPLIES_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger REPLY_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."REPLY_TRG" 
BEFORE INSERT ON REPLIES 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MESSAGE_ID IS NULL THEN
      SELECT REPLY_SEQ.NEXTVAL INTO :NEW.MESSAGE_ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."REPLY_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TOPICS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."TOPICS_TRG" 
BEFORE INSERT ON TOPICS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT TOPICS_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
    IF INSERTING AND :NEW.OWNER_ID IS NULL THEN
      SELECT TOPICS_SEQ.NEXTVAL INTO :NEW.OWNER_ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."TOPICS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger USERS_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "FORUMS"."USERS_TRG" 
BEFORE INSERT ON USERS 
FOR EACH ROW 
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT USERS_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
    IF INSERTING AND :NEW.PASSWORD IS NULL THEN
      SELECT USERS_SEQ.NEXTVAL INTO :NEW.PASSWORD FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/
ALTER TRIGGER "FORUMS"."USERS_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Procedure ADD_FORUM
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "FORUMS"."ADD_FORUM" (
    title         IN    VARCHAR2,
    category_id   IN    NUMBER,
    user_id       IN    NUMBER,
    forum_id      OUT   NUMBER
) AS
BEGIN
    INSERT INTO forums (
        title,
        category_id,
        owner_id
    ) VALUES (
        title,
        category_id,
        user_id
    ) RETURNING id INTO forum_id;

END;

/
--------------------------------------------------------
--  DDL for Procedure ADD_MESSAGE
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "FORUMS"."ADD_MESSAGE" (
    text         IN    VARCHAR2,
    user_id      IN    NUMBER,
    topic_id     IN    NUMBER,
    message_id   OUT   NUMBER
) AS
BEGIN
    INSERT INTO messages (
        text,
        topic_id,
        user_id
    ) VALUES (
        text,
        topic_id,
        user_id
    ) RETURNING id INTO message_id;

END;

/
--------------------------------------------------------
--  DDL for Procedure ADD_REPLY
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "FORUMS"."ADD_REPLY" (
    text         IN    VARCHAR2,
    user_id      IN    NUMBER,
    message_id   IN    NUMBER,
    reply_id     OUT   NUMBER
) AS
BEGIN
    INSERT INTO replies (
        text,
        user_id,
        message_id
    ) VALUES (
        text,
        user_id,
        message_id
    ) RETURNING id INTO reply_id;

END;

/
--------------------------------------------------------
--  DDL for Procedure ADD_SUBFORUM
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "FORUMS"."ADD_SUBFORUM" (
    title         IN    VARCHAR2,
    user_id       IN    NUMBER,
    forum_id      IN    NUMBER,
    subforum_id   OUT   NUMBER
) AS
BEGIN
    INSERT INTO forums (
        title,
        forum_id,
        owner_id
    ) VALUES (
        title,
        forum_id,
        user_id
    ) RETURNING id INTO subforum_id;

END;

/
--------------------------------------------------------
--  DDL for Procedure ADD_TOPIC
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "FORUMS"."ADD_TOPIC" (
    title      IN    VARCHAR2,
    user_id    IN    NUMBER,
    forum_id   IN    NUMBER,
    topic_id   OUT   NUMBER
) AS
BEGIN
    INSERT INTO topics (
        title,
        forum_id,
        owner_id
    ) VALUES (
        title,
        forum_id,
        user_id
    ) RETURNING id INTO topic_id;

END;

/
--------------------------------------------------------
--  DDL for Procedure ADD_USER
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "FORUMS"."ADD_USER" (
    username   IN    VARCHAR2,
    password   IN    VARCHAR2,
    user_id    OUT   NUMBER
) AS
BEGIN
    INSERT INTO users (
        username,
        password
    ) VALUES (
        username,
        password
    ) RETURNING id INTO user_id;

END;

/
--------------------------------------------------------
--  Constraints for Table REPLIES
--------------------------------------------------------

  ALTER TABLE "FORUMS"."REPLIES" ADD CONSTRAINT "REPLY_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."REPLIES" MODIFY ("MESSAGE_ID" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."REPLIES" MODIFY ("USER_ID" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."REPLIES" MODIFY ("TEXT" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."REPLIES" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TOPICS
--------------------------------------------------------

  ALTER TABLE "FORUMS"."TOPICS" ADD CONSTRAINT "TOPICS_UK1" UNIQUE ("TITLE", "FORUM_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."TOPICS" MODIFY ("OWNER_ID" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."TOPICS" ADD CONSTRAINT "TOPICS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."TOPICS" MODIFY ("FORUM_ID" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."TOPICS" MODIFY ("TITLE" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."TOPICS" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table MESSAGES
--------------------------------------------------------

  ALTER TABLE "FORUMS"."MESSAGES" ADD CONSTRAINT "MESSAGES_UK1" UNIQUE ("TEXT", "USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."MESSAGES" MODIFY ("USER_ID" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."MESSAGES" ADD CONSTRAINT "MESSAGES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."MESSAGES" MODIFY ("TEXT" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."MESSAGES" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table CATEGORIES
--------------------------------------------------------

  ALTER TABLE "FORUMS"."CATEGORIES" ADD CONSTRAINT "CATEGORIES_UK1" UNIQUE ("TITLE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."CATEGORIES" ADD CONSTRAINT "CATEGORIES_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."CATEGORIES" MODIFY ("TITLE" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."CATEGORIES" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table USERS
--------------------------------------------------------

  ALTER TABLE "FORUMS"."USERS" ADD CONSTRAINT "USERS_UK1" UNIQUE ("USERNAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."USERS" ADD CONSTRAINT "USERS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."USERS" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."USERS" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."USERS" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table FORUMS
--------------------------------------------------------

  ALTER TABLE "FORUMS"."FORUMS" MODIFY ("OWNER_ID" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."FORUMS" ADD CONSTRAINT "FORUMS_UK1" UNIQUE ("TITLE", "OWNER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."FORUMS" ADD CONSTRAINT "FORUMS_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "FORUMS"."FORUMS" MODIFY ("TITLE" NOT NULL ENABLE);
  ALTER TABLE "FORUMS"."FORUMS" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table FORUMS
--------------------------------------------------------

  ALTER TABLE "FORUMS"."FORUMS" ADD CONSTRAINT "FORUMS_FK1" FOREIGN KEY ("CATEGORY_ID")
	  REFERENCES "FORUMS"."CATEGORIES" ("ID") ENABLE;
  ALTER TABLE "FORUMS"."FORUMS" ADD CONSTRAINT "FORUMS_FK2" FOREIGN KEY ("FORUM_ID")
	  REFERENCES "FORUMS"."FORUMS" ("ID") ENABLE;
  ALTER TABLE "FORUMS"."FORUMS" ADD CONSTRAINT "FORUMS_FK3" FOREIGN KEY ("OWNER_ID")
	  REFERENCES "FORUMS"."USERS" ("ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table MESSAGES
--------------------------------------------------------

  ALTER TABLE "FORUMS"."MESSAGES" ADD CONSTRAINT "MESSAGES_FK1" FOREIGN KEY ("TOPIC_ID")
	  REFERENCES "FORUMS"."TOPICS" ("ID") ENABLE;
  ALTER TABLE "FORUMS"."MESSAGES" ADD CONSTRAINT "MESSAGES_FK2" FOREIGN KEY ("USER_ID")
	  REFERENCES "FORUMS"."USERS" ("ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table REPLIES
--------------------------------------------------------

  ALTER TABLE "FORUMS"."REPLIES" ADD CONSTRAINT "REPLY_FK1" FOREIGN KEY ("USER_ID")
	  REFERENCES "FORUMS"."USERS" ("ID") ENABLE;
  ALTER TABLE "FORUMS"."REPLIES" ADD CONSTRAINT "REPLY_FK2" FOREIGN KEY ("MESSAGE_ID")
	  REFERENCES "FORUMS"."MESSAGES" ("ID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table TOPICS
--------------------------------------------------------

  ALTER TABLE "FORUMS"."TOPICS" ADD CONSTRAINT "TOPICS_FK1" FOREIGN KEY ("FORUM_ID")
	  REFERENCES "FORUMS"."FORUMS" ("ID") ENABLE;
  ALTER TABLE "FORUMS"."TOPICS" ADD CONSTRAINT "TOPICS_FK2" FOREIGN KEY ("OWNER_ID")
	  REFERENCES "FORUMS"."USERS" ("ID") ENABLE;
